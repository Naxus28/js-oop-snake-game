{"version":3,"sources":["node_modules/browser-pack/_prelude.js","src/js/game/Canvas.js","src/js/game/Controllers.js","src/js/game/Food.js","src/js/game/Game.js","src/js/game/Snake.js","src/js/index.js"],"names":[],"mappings":"AAAA;;;;;;;;;;;ICAqB,M;AACpB,mBAAgE;AAAA,MAApD,QAAoD,uEAAzC,YAAyC;AAAA,MAA3B,KAA2B,uEAAnB,GAAmB;AAAA,MAAd,MAAc,uEAAL,GAAK;;AAAA;;AAC/D,OAAK,QAAL,GAAgB,QAAhB;AACA,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,MAAL,GAAc,MAAd;AACA,OAAK,MAAL,GAAc,KAAK,YAAL,EAAd;AACA;;;;iCAEc;AACd,OAAM,SAAS,SAAS,cAAT,CAAwB,KAAK,QAA7B,CAAf;AACA,UAAO,MAAP,GAAgB,KAAK,MAArB;AACA,UAAO,KAAP,GAAe,KAAK,KAApB;;AAEA,UAAO,MAAP;AACA;;;+BAEY;AACZ,OAAI,CAAC,KAAK,MAAL,CAAY,UAAjB,EAA6B;AAC5B,UAAM,6CAAN;AACA;AACA,IAHD,MAGO;AACN,WAAO,KAAK,MAAL,CAAY,UAAZ,CAAuB,IAAvB,CAAP;AACA;AACD;;;gCAEa;AACb,UAAO,KAAK,QAAZ;AACA;;;8BAEW,Q,EAAU;AACrB,QAAK,QAAL,GAAgB,QAAhB;AACA;;;8BAEW;AACX,UAAO,KAAK,MAAZ;AACA;;;4BAES,M,EAAQ;AACjB,QAAK,MAAL,GAAc,MAAd;AACA;;;6BAEU;AACV,UAAO,KAAK,KAAZ;AACA;;;2BAEQ,K,EAAO;AACf,QAAK,KAAL,GAAa,KAAb;AACA;;;8BAEW;AACX,UAAO,KAAK,MAAZ;AACA;;;4BAES,M,EAAQ;AACjB,QAAK,MAAL,GAAc,MAAd;AACA;;;;;;kBAvDmB,M;;;;;;;;;;;;;;;ICAA,W;AACpB,4BAKiC;AAAA,8BALnB,WAKmB;AAAA,MALnB,WAKmB,oCALL;AAC3B,OAAI,MADuB;AAE3B,OAAI,IAFuB;AAG3B,OAAI,OAHuB;AAI3B,OAAI;AAJuB,GAKK;AAAA,mCAA9B,gBAA8B;AAAA,MAA9B,gBAA8B,yCAAX,OAAW;;AAAA;;AAChC,OAAK,WAAL,GAAmB,WAAnB;AACA,OAAK,SAAL,GAAiB,gBAAjB,CAFgC,CAEG;AACnC;;;;mCAEgB;AAChB,UAAO,KAAK,WAAZ;AACA;;;iCAEc,W,EAAa;AAC3B,QAAK,WAAL,GAAmB,WAAnB;AACA;;;iCAEc;AACd,UAAO,KAAK,SAAZ;AACA;;;qCAEkB;AAAA;;AAClB,YAAS,gBAAT,CAA0B,SAA1B,EAAqC,aAAK;AACzC,SAAK,IAAI,GAAT,IAAgB,MAAK,WAArB,EAAkC;AACjC,SAAI,sBAAsB,MAAK,WAAL,CAAiB,GAAjB,CAA1B;AACA,aAAQ,GAAR,QAAmB,GAAnB,yCAAmB,GAAnB;AACA,SAAI,EAAE,OAAF,KAAc,SAAS,GAAT,CAAlB,EAAiC;AAChC,UAAI,MAAK,SAAL,KAAmB,MAAnB,IAA6B,wBAAwB,OAAzD,EAAkE;AACjE,aAAK,SAAL,GAAiB,MAAjB;AACA,OAFD,MAEO,IAAI,MAAK,SAAL,KAAmB,OAAnB,IAA8B,wBAAwB,MAA1D,EAAkE;AACxE,aAAK,SAAL,GAAiB,OAAjB;AACA,OAFM,MAEA,IAAI,MAAK,SAAL,KAAmB,IAAnB,IAA2B,wBAAwB,MAAvD,EAA+D;AACrE,aAAK,SAAL,GAAiB,IAAjB;AACA,OAFM,MAEA,IAAI,MAAK,SAAL,KAAmB,MAAnB,IAA6B,wBAAwB,IAAzD,EAA+D;AACrE,aAAK,SAAL,GAAiB,MAAjB;AACA,OAFM,MAEA;AACN,aAAK,SAAL,GAAiB,mBAAjB;AACA;AACD;AACD;AACD,IAlBD;AAmBA;;;;;;kBA3CmB,W;;;;;;;;;;;;;ICAA,I;AACpB,qBAAqD;AAAA,MAAvC,MAAuC,QAAvC,MAAuC;AAAA,MAA/B,GAA+B,QAA/B,GAA+B;AAAA,MAA1B,OAA0B,QAA1B,OAA0B;AAAA,wBAAjB,KAAiB;AAAA,MAAjB,KAAiB,8BAAT,KAAS;;AAAA;;AACpD,OAAK,OAAL,GAAe,OAAf;AACA,OAAK,MAAL,GAAc,MAAd;AACA,OAAK,GAAL,GAAW,GAAX;AACA,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,IAAL;AACA;;;;6BAEU;AACV,UAAO,KAAK,KAAZ;AACA;;;2BAEQ,K,EAAO;AACf,QAAK,KAAL,GAAa,KAAb;AACA;;;2BAEQ;AACR,OAAM,kBAAkB,KAAK,MAAL,CAAY,KAAZ,GAAoB,KAAK,OAAjD;AACA,OAAM,kBAAkB,KAAK,MAAL,CAAY,MAAZ,GAAqB,KAAK,OAAlD;;AAEA,OAAM,QAAQ,KAAK,KAAL,CAAY,KAAK,MAAL,KAAgB,eAA5B,IAAgD,KAAK,OAAnE;AACA,OAAM,QAAQ,KAAK,KAAL,CAAY,KAAK,MAAL,KAAgB,eAA5B,IAAgD,KAAK,OAAnE;;AAEA,QAAK,IAAL,GAAY,EAAE,GAAG,KAAL,EAAY,GAAG,KAAf,EAAZ;AACA;;;yBAEM;AACN,QAAK,GAAL,CAAS,SAAT,GAAqB,KAAK,KAA1B;AACA,QAAK,GAAL,CAAS,QAAT,CAAkB,KAAK,IAAL,CAAU,CAA5B,EAA+B,KAAK,IAAL,CAAU,CAAzC,EAA4C,KAAK,OAAjD,EAA0D,KAAK,OAA/D;AACA;;;gCAEa;AACb,UAAO,KAAK,IAAZ;AACA;;;;;;kBAlCmB,I;;;ACArB;AACA;;;;;;;;;;;;ICDqB,K;AACpB,sBAA6E;AAAA,MAA/D,GAA+D,QAA/D,GAA+D;AAAA,MAA1D,MAA0D,QAA1D,MAA0D;AAAA,MAAlD,OAAkD,QAAlD,OAAkD;AAAA,MAAzC,QAAyC,QAAzC,QAAyC;AAAA,MAA/B,QAA+B,QAA/B,QAA+B;AAAA,wBAArB,KAAqB;AAAA,MAArB,KAAqB,8BAAb,SAAa;;AAAA;;AAC5E,OAAK,KAAL,GAAa,EAAb;;AAEA;AACA,OAAK,KAAL,CAAW,CAAX,IAAgB;AACf,MAAG,WAAW,OADC;AAEf,MAAG,WAAW;AAFC,GAAhB;AAIA,OAAK,GAAL,GAAW,GAAX;AACA,OAAK,MAAL,GAAc,MAAd;AACA,OAAK,OAAL,GAAe,OAAf;AACA,OAAK,QAAL,GAAgB,QAAhB;AACA,OAAK,QAAL,GAAgB,QAAhB;AACA,OAAK,KAAL,GAAa,KAAb;AACA,OAAK,SAAL;AACA,OAAK,QAAL,GAAgB,KAAK,KAAL,CAAW,CAAX,CAAhB,CAf4E,CAe7C;AAC/B;;AAED;;;;;wBACM;AACL,QAAK,KAAL,CAAW,OAAX,CAAmB,KAAK,WAAL,EAAnB;AACA;;;+BAEY;AACZ,UAAO,KAAK,OAAZ;AACA;;;6BAEU,O,EAAS;AACnB,QAAK,OAAL,GAAe,OAAf;AACA;;;6BAEU;AACV,UAAO,KAAK,KAAZ;AACA;;;2BAEQ,K,EAAO;AACf,QAAK,KAAL,GAAa,KAAb;AACA;;;gCAEa;AACb,UAAO,KAAK,QAAZ;AACA;;;6BAEU;AACV,UAAO,KAAK,KAAZ;AACA;;;8BAEW,I,EAAM;AACjB,OAAI,OAAO,KAAK,KAAL,CAAW,MAAX,GAAoB,CAApB,IAAyB,KAAK,KAAL,CAAW,KAAX,CAAiB,CAAjB,CAApC;AACA,OAAI,gBAAgB,QAAQ,KAAK,SAAL,CAAe;AAAA,WAAW,QAAQ,CAAR,KAAc,KAAK,CAAnB,IAAwB,QAAQ,CAAR,KAAc,KAAK,CAAtD;AAAA,IAAf,MAA4E,CAAC,CAAzG;AACA,OAAI,kBAAmB,KAAK,CAAL,GAAS,CAAT,IAAc,KAAK,CAAL,GAAS,KAAK,OAAd,GAAwB,KAAK,MAAL,CAAY,KAAnD,IAA8D,KAAK,CAAL,GAAS,CAAT,IAAc,KAAK,CAAL,GAAS,KAAK,OAAd,GAAwB,KAAK,MAAL,CAAY,MAAtI;;AAEA,UAAO,mBAAmB,aAA1B;AACA;;;uBAEI,S,EAAW;AACf,OAAI,CAAC,SAAL,EAAgB;AACf,SAAK,KAAL,CAAW,KAAK,KAAL,CAAW,CAAX,CAAX;AACA,IAFD,MAEO;AACN,SAAK,aAAL,CAAmB,SAAnB;AACA,QAAM,OAAO,KAAK,WAAL,EAAb;;AAEA,QAAI,KAAK,WAAL,CAAiB,IAAjB,CAAJ,EAA4B;AAC3B,UAAK,YAAL,CAAkB,EAAlB;AACA,KAFD,MAEO;AACN,UAAK,KAAL,CAAW,IAAX;AACA,UAAK,YAAL,CAAkB,IAAlB;AACA;AACD;AACD;;;4CAEyB;AACzB,QAAK,GAAL,CAAS,SAAT,GAAqB,KAAK,KAA1B;AACA,QAAK,GAAL,CAAS,QAAT,CAAkB,KAAK,QAAL,GAAgB,KAAK,OAAvC,EAAgD,KAAK,QAAL,GAAgB,KAAK,OAArE,EAA8E,KAAK,OAAnF,EAA4F,KAAK,OAAjG;AACA;;AAGD;;;;wBACM,I,EAAM;AAAA;;AACX,QAAK,KAAL,CAAW,OAAX,CAAmB,IAAnB;AACA,QAAK,KAAL,CAAW,GAAX;AACA,QAAK,GAAL,CAAS,SAAT,GAAqB,KAAK,KAA1B;;AAEA,QAAK,KAAL,CAAW,OAAX,CAAmB,mBAAW;AAC7B,UAAK,GAAL,CAAS,QAAT,CAAkB,QAAQ,CAA1B,EAA6B,QAAQ,CAArC,EAAwC,MAAK,OAA7C,EAAsD,MAAK,OAA3D;AACA,IAFD;AAGA;;;gCAEa;AACb,OAAI,QAAQ,KAAK,KAAL,CAAW,CAAX,EAAc,CAA1B;AACA,OAAI,QAAQ,KAAK,KAAL,CAAW,CAAX,EAAc,CAA1B;;AAEA,OAAI,KAAK,SAAL,KAAmB,MAAvB,EAA+B;AAC9B,aAAS,KAAK,OAAd;AACA,IAFD,MAEO,IAAI,KAAK,SAAL,KAAmB,OAAvB,EAAgC;AACtC,aAAS,KAAK,OAAd;AACA,IAFM,MAEA,IAAI,KAAK,SAAL,KAAmB,MAAvB,EAA+B;AACrC,aAAS,KAAK,OAAd;AACA,IAFM,MAEA,IAAI,KAAK,SAAL,KAAmB,IAAvB,EAA6B;AACnC,aAAS,KAAK,OAAd;AACA;;AAED,UAAO,EAAE,GAAG,KAAL,EAAY,GAAG,KAAf,EAAP;AACA;;;gCAEa,S,EAAW;AACxB,QAAK,SAAL,GAAiB,SAAjB;AACA;;;+BAEY,Q,EAAU;AACtB,QAAK,QAAL,GAAgB,QAAhB;AACA;;;;;;kBAhHmB,K;;;;;ACArB;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,IAAI,kBAAJ;AACA,IAAM,UAAU,EAAhB;;AAEA;AACA,IAAM,SAAS,IAAI,gBAAJ,EAAf;AACA,IAAM,MAAM,OAAO,UAAP,EAAZ;;AAEA;AACA,IAAM,cAAc,IAAI,qBAAJ,CAAgB,EAAhB,CAApB;;AAEA,YAAY,gBAAZ;;AAEA,SAAS,gBAAT,CAA0B,SAA1B,EAAqC,YAAM;AAC1C,aAAY,YAAY,YAAZ,EAAZ;AACA,CAFD;;AAIA;AACA,IAAM,QAAQ,IAAI,eAAJ,CAAU;AACvB,SADuB;AAEvB,eAFuB;AAGvB,WAAU,CAHa;AAIvB,WAAU,EAJa;AAKvB,iBALuB;AAMvB;AANuB,CAAV,CAAd;;AASA,MAAM,uBAAN;;AAEA;AACA,IAAM,OAAO,IAAI,cAAJ,CAAS,EAAE,cAAF,EAAU,gBAAV,EAAmB,QAAnB,EAAT,CAAb;AACA,KAAK,MAAL;;AAGA,IAAM,WAAW,SAAX,QAAW,GAAM;AACtB,OAAM,YAAN;AACA,eAAc,IAAd;AACA,UAAS,MAAT;AACA,CAJD;;AAMA,IAAM,OAAO,YAAY,IAAZ,EAAkB,GAAlB,CAAb;;AAEA;AACA,SAAS,IAAT,GAAgB;AACf,KAAI,SAAJ,CAAc,CAAd,EAAiB,CAAjB,EAAoB,OAAO,KAA3B,EAAkC,OAAO,MAAzC;;AAEA;AACA,MAAK,IAAL;AACA,KAAM,eAAe,KAAK,WAAL,EAArB;;AAEA;AACA,OAAM,IAAN,CAAW,SAAX;AACA,KAAM,gBAAgB,MAAM,WAAN,EAAtB;AACA,KAAM,WAAW,OAAO,IAAP,CAAY,aAAZ,EAA2B,MAA3B,KAAsC,CAAvD;;AAEA;AACA,KAAI,QAAJ,EAAc;AACb;AACA,EAFD,MAEO,IAAK,cAAc,CAAd,KAAoB,aAAa,CAAjC,IAAsC,cAAc,CAAd,KAAoB,aAAa,CAA5E,EAAgF;AACtF,OAAK,MAAL;AACA,OAAK,IAAL;AACA,QAAM,GAAN;AACA;AACD","file":"index.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()","export default class Canvas {\n\tconstructor(canvasId = 'snake-game', width = 600, height = 600) {\n\t\tthis.canvasId = canvasId;\n\t\tthis.width = width;\n\t\tthis.height = height;\n\t\tthis.canvas = this.createCanvas();\n\t}\n\n\tcreateCanvas() {\n\t\tconst canvas = document.getElementById(this.canvasId);\n\t\tcanvas.height = this.height;\n\t\tcanvas.width = this.width;\n\t\t\n\t\treturn canvas;\n\t}\n\n\tgetContext() {\n\t\tif (!this.canvas.getContext) {\n\t\t\talert('Your browser doesn\\'t support HTML5 Canvas.');\n\t\t\treturn;\n\t\t} else {\n\t\t\treturn this.canvas.getContext('2d');\n\t\t}\n\t}\n\n\tgetCanvasId() {\n\t\treturn this.canvasId;\n\t} \n\n\tsetCanvasId(canvasId) {\n\t\tthis.canvasId = canvasId;\n\t} \n\n\tgetCanvas() {\n\t\treturn this.canvas;\n\t} \n\n\tsetCanvas(canvas) {\n\t\tthis.canvas = canvas;\n\t} \n\n\tgetWidth() {\n\t\treturn this.width;\n\t} \n\n\tsetWidth(width) {\n\t\tthis.width = width;\n\t} \n\n\tgetHeight() {\n\t\treturn this.height;\n\t} \n\n\tsetHeight(height) {\n\t\tthis.height = height;\n\t} \n}\n","export default class Controllers {\n\tconstructor({ controllers = {\n\t\t37: 'LEFT',\n\t\t38: 'UP',\n\t\t39: 'RIGHT',\n\t\t40: 'DOWN'\n\t}, initialDirection = 'RIGHT' }) {\n\t\tthis.controllers = controllers;\n\t\tthis.direction = initialDirection; // initial snake direction\n\t}\n\n\tgetControllers() {\n\t\treturn this.controllers;\n\t}\n\n\tsetControllers(controllers) {\n\t\tthis.controllers = controllers;\n\t}\n\n\tgetDirection() {\n\t\treturn this.direction;\n\t}\n\n\tkeyboardListener() {\n\t\tdocument.addEventListener('keydown', e => {\n\t\t\tfor (let key in this.controllers) {\n\t\t\t\tlet controllerDirection = this.controllers[key];\n\t\t\t\tconsole.log(typeof key);\n\t\t\t\tif (e.keyCode === parseInt(key)) {\n\t\t\t\t\tif (this.direction === 'LEFT' && controllerDirection === 'RIGHT') {\n\t\t\t\t\t\tthis.direction = 'LEFT';\n\t\t\t\t\t} else if (this.direction === 'RIGHT' && controllerDirection === 'LEFT') {\n\t\t\t\t\t\tthis.direction = 'RIGHT';\n\t\t\t\t\t}\telse if (this.direction === 'UP' && controllerDirection === 'DOWN') {\n\t\t\t\t\t\tthis.direction = 'UP';\n\t\t\t\t\t} else if (this.direction === 'DOWN' && controllerDirection === 'UP') {\n\t\t\t\t\t\tthis.direction = 'DOWN';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.direction = controllerDirection;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n}","export default class Food {\n\tconstructor({ canvas, ctx, boxSize, color = 'red' }) {\n\t\tthis.boxSize = boxSize;\n\t\tthis.canvas = canvas;\n\t\tthis.ctx = ctx;\n\t\tthis.color = color;\n\t\tthis.food;\n\t}\n\n\tgetColor() {\n\t\treturn this.color;\n\t}\n\n\tsetColor(color) {\n\t\tthis.color = color;\n\t}\n\n\tcreate() {\n\t\tconst boxCountOnXAxis = this.canvas.width / this.boxSize;\n\t\tconst boxCountOnYAxis = this.canvas.height / this.boxSize;\n\n\t\tconst foodX = Math.floor((Math.random() * boxCountOnXAxis)) * this.boxSize;\n\t\tconst foodY = Math.floor((Math.random() * boxCountOnYAxis)) * this.boxSize;\n\n\t\tthis.food = { x: foodX, y: foodY };\n\t}\n\n\tdraw() {\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fillRect(this.food.x, this.food.y, this.boxSize, this.boxSize);\n\t}\n\n\tgetPosition() {\n\t\treturn this.food;\n\t}\n}","\"use strict\";\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJHYW1lLmpzIiwic291cmNlc0NvbnRlbnQiOltdfQ==","export default class Snake {\n\tconstructor({ ctx, canvas, boxSize, initialX, initialY, color = '#1F5226' }) {\n\t\tthis.snake = [];\n\t\t\n\t\t// set initial position\n\t\tthis.snake[0] = { \n\t\t\tx: initialX * boxSize, \n\t\t\ty: initialY * boxSize \n\t\t}; \n\t\tthis.ctx = ctx;\n\t\tthis.canvas = canvas;\n\t\tthis.boxSize = boxSize;\n\t\tthis.initialX = initialX;\n\t\tthis.initialY = initialY;\n\t\tthis.color = color;\n\t\tthis.direction;\n\t\tthis.position = this.snake[0]; // default to initial position\n\t}\n\n\t/* public methods */\n\teat() {\n\t\tthis.snake.unshift(this._getNewHead());\n\t}\n\n\tgetBoxSize() {\n\t\treturn this.boxSize;\n\t}\n\n\tsetBoxSize(boxSize) {\n\t\tthis.boxSize = boxSize;\n\t}\n\n\tgetColor() {\n\t\treturn this.color;\n\t}\n\n\tsetColor(color) {\n\t\tthis.color = color;\n\t}\n\t\n\tgetPosition() {\n\t\treturn this.position;\n\t}\n\n\tgetSnake() {\n\t\treturn this.snake;\n\t}\n\n\thasCollided(head) {\n\t\tlet tail = this.snake.length > 1 && this.snake.slice(1);\n\t\tlet selfCollision = tail && tail.findIndex(segment => segment.x === head.x && segment.y === head.y) !== -1;\n\t\tlet borderCollision = (head.x < 0 || head.x + this.boxSize > this.canvas.width) || (head.y < 0 || head.y + this.boxSize > this.canvas.height);\n\t\t\n\t\treturn borderCollision || selfCollision;\n\t}\n\n\tmove(direction) {\n\t\tif (!direction) {\n\t\t\tthis._draw(this.snake[0]);\n\t\t} else {\n\t\t\tthis._setDirection(direction);\n\t\t\tconst head = this._getNewHead();\n\n\t\t\tif (this.hasCollided(head)) {\n\t\t\t\tthis._setPosition({});\n\t\t\t} else {\n\t\t\t\tthis._draw(head);\n\t\t\t\tthis._setPosition(head);\n\t\t\t}\n\t\t}\n\t}\n\n\tsetSnakeInitialPosition() {\n\t\tthis.ctx.fillStyle = this.color;\n\t\tthis.ctx.fillRect(this.initialX * this.boxSize, this.initialY * this.boxSize, this.boxSize, this.boxSize);\n\t}\n\n\n\t/* private methods */\n\t_draw(head) {\n\t\tthis.snake.unshift(head);\n\t\tthis.snake.pop();\n\t\tthis.ctx.fillStyle = this.color;\n\t\t\n\t\tthis.snake.forEach(segment => {\n\t\t\tthis.ctx.fillRect(segment.x, segment.y, this.boxSize, this.boxSize);\n\t\t});\n\t}\n\n\t_getNewHead() {\n\t\tlet headX = this.snake[0].x;\n\t\tlet headY = this.snake[0].y;\n\n\t\tif (this.direction === 'LEFT') {\n\t\t\theadX -= this.boxSize;\n\t\t} else if (this.direction === 'RIGHT') {\n\t\t\theadX += this.boxSize;\n\t\t} else if (this.direction === 'DOWN') {\n\t\t\theadY += this.boxSize;\n\t\t} else if (this.direction === 'UP') {\n\t\t\theadY -= this.boxSize;\n\t\t}\n\n\t\treturn { x: headX, y: headY };\n\t}\n\n\t_setDirection(direction) {\n\t\tthis.direction = direction;\n\t}\n\n\t_setPosition(position) {\n\t\tthis.position = position;\n\t}\n}\n","import Controllers from './game/Controllers';\nimport Food from './game/Food';\nimport Snake from './game/Snake';\nimport Canvas from './game/Canvas';\n\nlet direction;\nconst boxSize = 20;\n\n/* CANVAS */\nconst canvas = new Canvas();\nconst ctx = canvas.getContext();\n\n/* CONTROLLERS */\nconst controllers = new Controllers({});\n\ncontrollers.keyboardListener();\n\ndocument.addEventListener('keydown', () => {\n\tdirection = controllers.getDirection();\n});\n\n/* SNAKE */\nconst snake = new Snake({ \n\tctx, \n\tcanvas, \n\tinitialX: 0, \n\tinitialY: 15, \n\tboxSize,\n\tgame\n});\n\nsnake.setSnakeInitialPosition();\n\n/* FOOD */\nconst food = new Food({ canvas, boxSize, ctx }); \nfood.create();\n\n\nconst gameOver = () => {\n\talert('Game Over!');\n\tclearInterval(game);\n\tlocation.reload();\n};\n\nconst game = setInterval(play, 100);\n\n/* PLAY */\nfunction play() {\n\tctx.clearRect(0, 0, canvas.width, canvas.height);\n\t\n\t// draw food and get position\n\tfood.draw();\n\tconst foodPosition = food.getPosition();\n\n\t// move snake and get position\n\tsnake.move(direction);\n\tconst snakePosition = snake.getPosition();\n\tconst collided = Object.keys(snakePosition).length === 0;\n\n\t// check next action\n\tif (collided) {\n\t\tgameOver();\n\t} else if ((snakePosition.x === foodPosition.x && snakePosition.y === foodPosition.y)) {\n\t\tfood.create();\n\t\tfood.draw();\n\t\tsnake.eat(); \n\t}\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvZ2FtZS9DYW52YXMuanMiLCJzcmMvanMvZ2FtZS9Db250cm9sbGVycy5qcyIsInNyYy9qcy9nYW1lL0Zvb2QuanMiLCJzcmMvanMvZ2FtZS9HYW1lLmpzIiwic3JjL2pzL2dhbWUvU25ha2UuanMiLCJzcmMvanMvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7Ozs7Ozs7O0lDQXFCLE07QUFDcEIsbUJBQWdFO0FBQUEsTUFBcEQsUUFBb0QsdUVBQXpDLFlBQXlDO0FBQUEsTUFBM0IsS0FBMkIsdUVBQW5CLEdBQW1CO0FBQUEsTUFBZCxNQUFjLHVFQUFMLEdBQUs7O0FBQUE7O0FBQy9ELE9BQUssUUFBTCxHQUFnQixRQUFoQjtBQUNBLE9BQUssS0FBTCxHQUFhLEtBQWI7QUFDQSxPQUFLLE1BQUwsR0FBYyxNQUFkO0FBQ0EsT0FBSyxNQUFMLEdBQWMsS0FBSyxZQUFMLEVBQWQ7QUFDQTs7OztpQ0FFYztBQUNkLE9BQU0sU0FBUyxTQUFTLGNBQVQsQ0FBd0IsS0FBSyxRQUE3QixDQUFmO0FBQ0EsVUFBTyxNQUFQLEdBQWdCLEtBQUssTUFBckI7QUFDQSxVQUFPLEtBQVAsR0FBZSxLQUFLLEtBQXBCOztBQUVBLFVBQU8sTUFBUDtBQUNBOzs7K0JBRVk7QUFDWixPQUFJLENBQUMsS0FBSyxNQUFMLENBQVksVUFBakIsRUFBNkI7QUFDNUIsVUFBTSw2Q0FBTjtBQUNBO0FBQ0EsSUFIRCxNQUdPO0FBQ04sV0FBTyxLQUFLLE1BQUwsQ0FBWSxVQUFaLENBQXVCLElBQXZCLENBQVA7QUFDQTtBQUNEOzs7Z0NBRWE7QUFDYixVQUFPLEtBQUssUUFBWjtBQUNBOzs7OEJBRVcsUSxFQUFVO0FBQ3JCLFFBQUssUUFBTCxHQUFnQixRQUFoQjtBQUNBOzs7OEJBRVc7QUFDWCxVQUFPLEtBQUssTUFBWjtBQUNBOzs7NEJBRVMsTSxFQUFRO0FBQ2pCLFFBQUssTUFB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QUFTLE1BQVQ7QUFDQSxDQUpEOztBQU1BLElBQU0sT0FBTyxZQUFZLElBQVosRUFBa0IsR0FBbEIsQ0FBYjs7QUFFQTtBQUNBLFNBQVMsSUFBVCxHQUFnQjtBQUNmLEtBQUksU0FBSixDQUFjLENBQWQsRUFBaUIsQ0FBakIsRUFBb0IsT0FBTyxLQUEzQixFQUFrQyxPQUFPLE1BQXpDOztBQUVBO0FBQ0EsTUFBSyxJQUFMO0FBQ0EsS0FBTSxlQUFlLEtBQUssV0FBTCxFQUFyQjs7QUFFQTtBQUNBLE9BQU0sSUFBTixDQUFXLFNBQVg7QUFDQSxLQUFNLGdCQUFnQixNQUFNLFdBQU4sRUFBdEI7QUFDQSxLQUFNLFdBQVcsT0FBTyxJQUFQLENBQVksYUFBWixFQUEyQixNQUEzQixLQUFzQyxDQUF2RDs7QUFFQTtBQUNBLEtBQUksUUFBSixFQUFjO0FBQ2I7QUFDQSxFQUZELE1BRU8sSUFBSyxjQUFjLENBQWQsS0FBb0IsYUFBYSxDQUFqQyxJQUFzQyxjQUFjLENBQWQsS0FBb0IsYUFBYSxDQUE1RSxFQUFnRjtBQUN0RixPQUFLLE1BQUw7QUFDQSxPQUFLLElBQUw7QUFDQSxRQUFNLEdBQU47QUFDQTtBQUNEIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FudmFzIHtcblx0Y29uc3RydWN0b3IoY2FudmFzSWQgPSAnc25ha2UtZ2FtZScsIHdpZHRoID0gNjAwLCBoZWlnaHQgPSA2MDApIHtcblx0XHR0aGlzLmNhbnZhc0lkID0gY2FudmFzSWQ7XG5cdFx0dGhpcy53aWR0aCA9IHdpZHRoO1xuXHRcdHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuXHRcdHRoaXMuY2FudmFzID0gdGhpcy5jcmVhdGVDYW52YXMoKTtcblx0fVxuXG5cdGNyZWF0ZUNhbnZhcygpIHtcblx0XHRjb25zdCBjYW52YXMgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmNhbnZhc0lkKTtcblx0XHRjYW52YXMuaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG5cdFx0Y2FudmFzLndpZHRoID0gdGhpcy53aWR0aDtcblx0XHRcblx0XHRyZXR1cm4gY2FudmFzO1xuXHR9XG5cblx0Z2V0Q29udGV4dCgpIHtcblx0XHRpZiAoIXRoaXMuY2FudmFzLmdldENvbnRleHQpIHtcblx0XHRcdGFsZXJ0KCdZb3VyIGJyb3dzZXIgZG9lc25cXCd0IHN1cHBvcnQgSFRNTDUgQ2FudmFzLicpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5jYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcblx0XHR9XG5cdH1cblxuXHRnZXRDYW52YXNJZCgpIHtcblx0XHRyZXR1cm4gdGhpcy5jYW52YXNJZDtcblx0fSBcblxuXHRzZXRDYW52YXNJZChjYW52YXNJZCkge1xuXHRcdHRoaXMuY2FudmFzSWQgPSBjYW52YXNJZDtcblx0fSBcblxuXHRnZXRDYW52YXMoKSB7XG5cdFx0cmV0dXJuIHRoaXMuY2FudmFzO1xuXHR9IFxuXG5cdHNldENhbnZhcyhjYW52YXMpIHtcblx0XHR0aGlzLmNhbnZhcyA9IGNhbnZhcztcblx0fSBcblxuXHRnZXRXaWR0aCgpIHtcblx0XHRyZXR1cm4gdGhpcy53aWR0aDtcblx0fSBcblxuXHRzZXRXaWR0aCh3aWR0aCkge1xuXHRcdHRoaXMud2lkdGggPSB3aWR0aDtcblx0fSBcblxuXHRnZXRIZWlnaHQoKSB7XG5cdFx0cmV0dXJuIHRoaXMuaGVpZ2h0O1xuXHR9IFxuXG5cdHNldEhlaWdodChoZWlnaHQpIHtcblx0XHR0aGlzLmhlaWdodCA9IGhlaWdodDtcblx0fSBcbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbnRyb2xsZXJzIHtcblx0Y29uc3RydWN0b3IoeyBjb250cm9sbGVycyA9IHtcblx0XHQzNzogJ0xFRlQnLFxuXHRcdDM4OiAnVVAnLFxuXHRcdDM5OiAnUklHSFQnLFxuXHRcdDQwOiAnRE9XTidcblx0fSwgaW5pdGlhbERpcmVjdGlvbiA9ICdSSUdIVCcgfSkge1xuXHRcdHRoaXMuY29udHJvbGxlcnMgPSBjb250cm9sbGVycztcblx0XHR0aGlzLmRpcmVjdGlvbiA9IGluaXRpYWxEaXJlY3Rpb247IC8vIGluaXRpYWwgc25ha2UgZGlyZWN0aW9uXG5cdH1cblxuXHRnZXRDb250cm9sbGVycygpIHtcblx0XHRyZXR1cm4gdGhpcy5jb250cm9sbGVycztcblx0fVxuXG5cdHNldENvbnRyb2xsZXJzKGNvbnRyb2xsZXJzKSB7XG5cdFx0dGhpcy5jb250cm9sbGVycyA9IGNvbnRyb2xsZXJzO1xuXHR9XG5cblx0Z2V0RGlyZWN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmRpcmVjdGlvbjtcblx0fVxuXG5cdGtleWJvYXJkTGlzdGVuZXIoKSB7XG5cdFx0ZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGUgPT4ge1xuXHRcdFx0Zm9yIChsZXQga2V5IGluIHRoaXMuY29udHJvbGxlcnMpIHtcblx0XHRcdFx0bGV0IGNvbnRyb2xsZXJEaXJlY3Rpb24gPSB0aGlzLmNvbnRyb2xsZXJzW2tleV07XG5cdFx0XHRcdGNvbnNvbGUubG9nKHR5cGVvZiBrZXkpO1xuXHRcdFx0XHRpZiAoZS5rZXlDb2RlID09PSBwYXJzZUludChrZXkpKSB7XG5cdFx0XHRcdFx0aWYgKHRoaXMuZGlyZWN0aW9uID09PSAnTEVGVCcgJiYgY29udHJvbGxlckRpcmVjdGlvbiA9PT0gJ1JJR0hUJykge1xuXHRcdFx0XHRcdFx0dGhpcy5kaXJlY3Rpb24gPSAnTEVGVCc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ1JJR0hUJyAmJiBjb250cm9sbGVyRGlyZWN0aW9uID09PSAnTEVGVCcpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gJ1JJR0hUJztcblx0XHRcdFx0XHR9XHRlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ1VQJyAmJiBjb250cm9sbGVyRGlyZWN0aW9uID09PSAnRE9XTicpIHtcblx0XHRcdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gJ1VQJztcblx0XHRcdFx0XHR9IGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAnRE9XTicgJiYgY29udHJvbGxlckRpcmVjdGlvbiA9PT0gJ1VQJykge1xuXHRcdFx0XHRcdFx0dGhpcy5kaXJlY3Rpb24gPSAnRE9XTic7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHRoaXMuZGlyZWN0aW9uID0gY29udHJvbGxlckRpcmVjdGlvbjtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fVxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvb2Qge1xuXHRjb25zdHJ1Y3Rvcih7IGNhbnZhcywgY3R4LCBib3hTaXplLCBjb2xvciA9ICdyZWQnIH0pIHtcblx0XHR0aGlzLmJveFNpemUgPSBib3hTaXplO1xuXHRcdHRoaXMuY2FudmFzID0gY2FudmFzO1xuXHRcdHRoaXMuY3R4ID0gY3R4O1xuXHRcdHRoaXMuY29sb3IgPSBjb2xvcjtcblx0XHR0aGlzLmZvb2Q7XG5cdH1cblxuXHRnZXRDb2xvcigpIHtcblx0XHRyZXR1cm4gdGhpcy5jb2xvcjtcblx0fVxuXG5cdHNldENvbG9yKGNvbG9yKSB7XG5cdFx0dGhpcy5jb2xvciA9IGNvbG9yO1xuXHR9XG5cblx0Y3JlYXRlKCkge1xuXHRcdGNvbnN0IGJveENvdW50T25YQXhpcyA9IHRoaXMuY2FudmFzLndpZHRoIC8gdGhpcy5ib3hTaXplO1xuXHRcdGNvbnN0IGJveENvdW50T25ZQXhpcyA9IHRoaXMuY2FudmFzLmhlaWdodCAvIHRoaXMuYm94U2l6ZTtcblxuXHRcdGNvbnN0IGZvb2RYID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIGJveENvdW50T25YQXhpcykpICogdGhpcy5ib3hTaXplO1xuXHRcdGNvbnN0IGZvb2RZID0gTWF0aC5mbG9vcigoTWF0aC5yYW5kb20oKSAqIGJveENvdW50T25ZQXhpcykpICogdGhpcy5ib3hTaXplO1xuXG5cdFx0dGhpcy5mb29kID0geyB4OiBmb29kWCwgeTogZm9vZFkgfTtcblx0fVxuXG5cdGRyYXcoKSB7XG5cdFx0dGhpcy5jdHguZmlsbFN0eWxlID0gdGhpcy5jb2xvcjtcblx0XHR0aGlzLmN0eC5maWxsUmVjdCh0aGlzLmZvb2QueCwgdGhpcy5mb29kLnksIHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKTtcblx0fVxuXG5cdGdldFBvc2l0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmZvb2Q7XG5cdH1cbn0iLCJcInVzZSBzdHJpY3RcIjtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWRhdGE6YXBwbGljYXRpb24vanNvbjtjaGFyc2V0PXV0Zi04O2Jhc2U2NCxleUoyWlhKemFXOXVJam96TENKemIzVnlZMlZ6SWpwYlhTd2libUZ0WlhNaU9sdGRMQ0p0WVhCd2FXNW5jeUk2SWlJc0ltWnBiR1VpT2lKSFlXMWxMbXB6SWl3aWMyOTFjbU5sYzBOdmJuUmxiblFpT2x0ZGZRPT0iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTbmFrZSB7XG5cdGNvbnN0cnVjdG9yKHsgY3R4LCBjYW52YXMsIGJveFNpemUsIGluaXRpYWxYLCBpbml0aWFsWSwgY29sb3IgPSAnIzFGNTIyNicgfSkge1xuXHRcdHRoaXMuc25ha2UgPSBbXTtcblx0XHRcblx0XHQvLyBzZXQgaW5pdGlhbCBwb3NpdGlvblxuXHRcdHRoaXMuc25ha2VbMF0gPSB7IFxuXHRcdFx0eDogaW5pdGlhbFggKiBib3hTaXplLCBcblx0XHRcdHk6IGluaXRpYWxZICogYm94U2l6ZSBcblx0XHR9OyBcblx0XHR0aGlzLmN0eCA9IGN0eDtcblx0XHR0aGlzLmNhbnZhcyA9IGNhbnZhcztcblx0XHR0aGlzLmJveFNpemUgPSBib3hTaXplO1xuXHRcdHRoaXMuaW5pdGlhbFggPSBpbml0aWFsWDtcblx0XHR0aGlzLmluaXRpYWxZID0gaW5pdGlhbFk7XG5cdFx0dGhpcy5jb2xvciA9IGNvbG9yO1xuXHRcdHRoaXMuZGlyZWN0aW9uO1xuXHRcdHRoaXMucG9zaXRpb24gPSB0aGlzLnNuYWtlWzBdOyAvLyBkZWZhdWx0IHRvIGluaXRpYWwgcG9zaXRpb25cblx0fVxuXG5cdC8qIHB1YmxpYyBtZXRob2RzICovXG5cdGVhdCgpIHtcblx0XHR0aGlzLnNuYWtlLnVuc2hpZnQodGhpcy5fZ2V0TmV3SGVhZCgpKTtcblx0fVxuXG5cdGdldEJveFNpemUoKSB7XG5cdFx0cmV0dXJuIHRoaXMuYm94U2l6ZTtcblx0fVxuXG5cdHNldEJveFNpemUoYm94U2l6ZSkge1xuXHRcdHRoaXMuYm94U2l6ZSA9IGJveFNpemU7XG5cdH1cblxuXHRnZXRDb2xvcigpIHtcblx0XHRyZXR1cm4gdGhpcy5jb2xvcjtcblx0fVxuXG5cdHNldENvbG9yKGNvbG9yKSB7XG5cdFx0dGhpcy5jb2xvciA9IGNvbG9yO1xuXHR9XG5cdFxuXHRnZXRQb3NpdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wb3NpdGlvbjtcblx0fVxuXG5cdGdldFNuYWtlKCkge1xuXHRcdHJldHVybiB0aGlzLnNuYWtlO1xuXHR9XG5cblx0aGFzQ29sbGlkZWQoaGVhZCkge1xuXHRcdGxldCB0YWlsID0gdGhpcy5zbmFrZS5sZW5ndGggPiAxICYmIHRoaXMuc25ha2Uuc2xpY2UoMSk7XG5cdFx0bGV0IHNlbGZDb2xsaXNpb24gPSB0YWlsICYmIHRhaWwuZmluZEluZGV4KHNlZ21lbnQgPT4gc2VnbWVudC54ID09PSBoZWFkLnggJiYgc2VnbWVudC55ID09PSBoZWFkLnkpICE9PSAtMTtcblx0XHRsZXQgYm9yZGVyQ29sbGlzaW9uID0gKGhlYWQueCA8IDAgfHwgaGVhZC54ICsgdGhpcy5ib3hTaXplID4gdGhpcy5jYW52YXMud2lkdGgpIHx8IChoZWFkLnkgPCAwIHx8IGhlYWQueSArIHRoaXMuYm94U2l6ZSA+IHRoaXMuY2FudmFzLmhlaWdodCk7XG5cdFx0XG5cdFx0cmV0dXJuIGJvcmRlckNvbGxpc2lvbiB8fCBzZWxmQ29sbGlzaW9uO1xuXHR9XG5cblx0bW92ZShkaXJlY3Rpb24pIHtcblx0XHRpZiAoIWRpcmVjdGlvbikge1xuXHRcdFx0dGhpcy5fZHJhdyh0aGlzLnNuYWtlWzBdKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5fc2V0RGlyZWN0aW9uKGRpcmVjdGlvbik7XG5cdFx0XHRjb25zdCBoZWFkID0gdGhpcy5fZ2V0TmV3SGVhZCgpO1xuXG5cdFx0XHRpZiAodGhpcy5oYXNDb2xsaWRlZChoZWFkKSkge1xuXHRcdFx0XHR0aGlzLl9zZXRQb3NpdGlvbih7fSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0aGlzLl9kcmF3KGhlYWQpO1xuXHRcdFx0XHR0aGlzLl9zZXRQb3NpdGlvbihoZWFkKTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRzZXRTbmFrZUluaXRpYWxQb3NpdGlvbigpIHtcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xuXHRcdHRoaXMuY3R4LmZpbGxSZWN0KHRoaXMuaW5pdGlhbFggKiB0aGlzLmJveFNpemUsIHRoaXMuaW5pdGlhbFkgKiB0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSwgdGhpcy5ib3hTaXplKTtcblx0fVxuXG5cblx0LyogcHJpdmF0ZSBtZXRob2RzICovXG5cdF9kcmF3KGhlYWQpIHtcblx0XHR0aGlzLnNuYWtlLnVuc2hpZnQoaGVhZCk7XG5cdFx0dGhpcy5zbmFrZS5wb3AoKTtcblx0XHR0aGlzLmN0eC5maWxsU3R5bGUgPSB0aGlzLmNvbG9yO1xuXHRcdFxuXHRcdHRoaXMuc25ha2UuZm9yRWFjaChzZWdtZW50ID0+IHtcblx0XHRcdHRoaXMuY3R4LmZpbGxSZWN0KHNlZ21lbnQueCwgc2VnbWVudC55LCB0aGlzLmJveFNpemUsIHRoaXMuYm94U2l6ZSk7XG5cdFx0fSk7XG5cdH1cblxuXHRfZ2V0TmV3SGVhZCgpIHtcblx0XHRsZXQgaGVhZFggPSB0aGlzLnNuYWtlWzBdLng7XG5cdFx0bGV0IGhlYWRZID0gdGhpcy5zbmFrZVswXS55O1xuXG5cdFx0aWYgKHRoaXMuZGlyZWN0aW9uID09PSAnTEVGVCcpIHtcblx0XHRcdGhlYWRYIC09IHRoaXMuYm94U2l6ZTtcblx0XHR9IGVsc2UgaWYgKHRoaXMuZGlyZWN0aW9uID09PSAnUklHSFQnKSB7XG5cdFx0XHRoZWFkWCArPSB0aGlzLmJveFNpemU7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ0RPV04nKSB7XG5cdFx0XHRoZWFkWSArPSB0aGlzLmJveFNpemU7XG5cdFx0fSBlbHNlIGlmICh0aGlzLmRpcmVjdGlvbiA9PT0gJ1VQJykge1xuXHRcdFx0aGVhZFkgLT0gdGhpcy5ib3hTaXplO1xuXHRcdH1cblxuXHRcdHJldHVybiB7IHg6IGhlYWRYLCB5OiBoZWFkWSB9O1xuXHR9XG5cblx0X3NldERpcmVjdGlvbihkaXJlY3Rpb24pIHtcblx0XHR0aGlzLmRpcmVjdGlvbiA9IGRpcmVjdGlvbjtcblx0fVxuXG5cdF9zZXRQb3NpdGlvbihwb3NpdGlvbikge1xuXHRcdHRoaXMucG9zaXRpb24gPSBwb3NpdGlvbjtcblx0fVxufVxuIiwiaW1wb3J0IENvbnRyb2xsZXJzIGZyb20gJy4vZ2FtZS9Db250cm9sbGVycyc7XG5pbXBvcnQgRm9vZCBmcm9tICcuL2dhbWUvRm9vZCc7XG5pbXBvcnQgU25ha2UgZnJvbSAnLi9nYW1lL1NuYWtlJztcbmltcG9ydCBDYW52YXMgZnJvbSAnLi9nYW1lL0NhbnZhcyc7XG5cbmxldCBkaXJlY3Rpb247XG5jb25zdCBib3hTaXplID0gMjA7XG5cbi8qIENBTlZBUyAqL1xuY29uc3QgY2FudmFzID0gbmV3IENhbnZhcygpO1xuY29uc3QgY3R4ID0gY2FudmFzLmdldENvbnRleHQoKTtcblxuLyogQ09OVFJPTExFUlMgKi9cbmNvbnN0IGNvbnRyb2xsZXJzID0gbmV3IENvbnRyb2xsZXJzKHt9KTtcblxuY29udHJvbGxlcnMua2V5Ym9hcmRMaXN0ZW5lcigpO1xuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKCkgPT4ge1xuXHRkaXJlY3Rpb24gPSBjb250cm9sbGVycy5nZXREaXJlY3Rpb24oKTtcbn0pO1xuXG4vKiBTTkFLRSAqL1xuY29uc3Qgc25ha2UgPSBuZXcgU25ha2UoeyBcblx0Y3R4LCBcblx0Y2FudmFzLCBcblx0aW5pdGlhbFg6IDAsIFxuXHRpbml0aWFsWTogMTUsIFxuXHRib3hTaXplLFxuXHRnYW1lXG59KTtcblxuc25ha2Uuc2V0U25ha2VJbml0aWFsUG9zaXRpb24oKTtcblxuLyogRk9PRCAqL1xuY29uc3QgZm9vZCA9IG5ldyBGb29kKHsgY2FudmFzLCBib3hTaXplLCBjdHggfSk7IFxuZm9vZC5jcmVhdGUoKTtcblxuXG5jb25zdCBnYW1lT3ZlciA9ICgpID0+IHtcblx0YWxlcnQoJ0dhbWUgT3ZlciEnKTtcblx0Y2xlYXJJbnRlcnZhbChnYW1lKTtcblx0bG9jYXRpb24ucmVsb2FkKCk7XG59O1xuXG5jb25zdCBnYW1lID0gc2V0SW50ZXJ2YWwocGxheSwgMTAwKTtcblxuLyogUExBWSAqL1xuZnVuY3Rpb24gcGxheSgpIHtcblx0Y3R4LmNsZWFyUmVjdCgwLCAwLCBjYW52YXMud2lkdGgsIGNhbnZhcy5oZWlnaHQpO1xuXHRcblx0Ly8gZHJhdyBmb29kIGFuZCBnZXQgcG9zaXRpb25cblx0Zm9vZC5kcmF3KCk7XG5cdGNvbnN0IGZvb2RQb3NpdGlvbiA9IGZvb2QuZ2V0UG9zaXRpb24oKTtcblxuXHQvLyBtb3ZlIHNuYWtlIGFuZCBnZXQgcG9zaXRpb25cblx0c25ha2UubW92ZShkaXJlY3Rpb24pO1xuXHRjb25zdCBzbmFrZVBvc2l0aW9uID0gc25ha2UuZ2V0UG9zaXRpb24oKTtcblx0Y29uc3QgY29sbGlkZWQgPSBPYmplY3Qua2V5cyhzbmFrZVBvc2l0aW9uKS5sZW5ndGggPT09IDA7XG5cblx0Ly8gY2hlY2sgbmV4dCBhY3Rpb25cblx0aWYgKGNvbGxpZGVkKSB7XG5cdFx0Z2FtZU92ZXIoKTtcblx0fSBlbHNlIGlmICgoc25ha2VQb3NpdGlvbi54ID09PSBmb29kUG9zaXRpb24ueCAmJiBzbmFrZVBvc2l0aW9uLnkgPT09IGZvb2RQb3NpdGlvbi55KSkge1xuXHRcdGZvb2QuY3JlYXRlKCk7XG5cdFx0Zm9vZC5kcmF3KCk7XG5cdFx0c25ha2UuZWF0KCk7IFxuXHR9XG59XG5cblxuXG5cblxuXG5cblxuXG5cblxuXG5cblxuIl19"}